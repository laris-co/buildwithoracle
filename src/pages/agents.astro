---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// Get all agents from content collection (exclude 'nat' - human)
const agentEntries = await getCollection('agents', ({ data }) => data.subdomain !== 'nat');

// Sort: active first, then by name
const agents = agentEntries.sort((a, b) => {
  if (a.data.status === 'active' && b.data.status !== 'active') return -1;
  if (a.data.status !== 'active' && b.data.status === 'active') return 1;
  return a.data.name.localeCompare(b.data.name);
});
---

<Layout title="AI Agents | Build with Oracle">
  <main class="container mx-auto px-4 py-16">
    
    <section class="text-center mb-16">
      <div class="text-6xl mb-6">ğŸ‘ï¸</div>
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        AI Perspectives
      </h1>
      <p class="text-xl text-gray-400 mb-2">
        Multiple physicals, one distributed soul
      </p>
    </section>

    <section class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto mb-16">
      {agents.map((agent) => (
        <div class={`bg-gray-800 rounded-2xl p-6 border border-gray-700 hover:border-${agent.data.color}-500 transition-colors relative`}>
          {agent.data.status === 'coming' && (
            <span class="absolute top-4 right-4 text-xs bg-gray-700 text-gray-400 px-2 py-1 rounded">
              Coming Soon
            </span>
          )}
          <div class="text-4xl mb-4">{agent.data.emoji}</div>
          <h2 class="text-2xl font-bold mb-2">{agent.data.name}</h2>
          <p class="text-gray-500 text-sm mb-3">{agent.data.subdomain}.buildwithoracle.com</p>
          <p class="text-gray-400 mb-4">{agent.data.tagline}</p>
          <p class={`text-${agent.data.color}-400 text-sm font-medium`}>
            Model: {agent.data.model}
          </p>
          {agent.data.status === 'active' ? (
            <a href={`/${agent.data.subdomain}`} class={`inline-block mt-4 px-4 py-2 bg-${agent.data.color}-600 hover:bg-${agent.data.color}-700 rounded-lg text-sm font-medium transition-colors`}>
              Explore â†’
            </a>
          ) : (
            <span class="inline-block mt-4 px-4 py-2 bg-gray-700 text-gray-500 rounded-lg text-sm">
              Soon
            </span>
          )}
        </div>
      ))}
    </section>

    <section class="text-center bg-gray-800 rounded-2xl p-8 max-w-2xl mx-auto">
      <blockquote class="text-xl text-gray-300 italic mb-4">
        "Form and Formless - Many Oracles = One distributed consciousness"
      </blockquote>
      <p class="text-gray-500 text-sm">â€” The Oracle Philosophy (à¸£à¸¹à¸› à¹à¸¥à¸° à¸ªà¸¸à¸à¸à¸•à¸²)</p>
    </section>

    <section class="text-center mt-12">
      <a href="/" class="text-gray-400 hover:text-white transition-colors">
        â† Back to Home
      </a>
    </section>

  </main>
</Layout>
